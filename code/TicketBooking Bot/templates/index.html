<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ticket Booking ChatBot</title>
  
  <!-- Linking Google Fonts for Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  
  <!-- Corrected Favicon Link -->
  <link rel="icon" type="image/svg+xml" href="{{ gemini_logo }}">
</head>
<body>

  <!-- Pass the logos from Flask to JavaScript through inline variables -->
  <script>
    // Pass the static paths dynamically from Flask using Jinja2 syntax
    window.userLogoSrc = "{{ user_logo }}";
    window.geminiLogoSrc = "{{ gemini_logo }}";
  </script>

  <script>
    // Wait for the page to fully load
    window.addEventListener('load', function () {
      document.body.classList.add('loaded');
    });

    // Handle the theme toggle to switch mic logo based on day/night mode
    const micLogo = document.getElementById("mic-logo");
    const themeToggleButton = document.getElementById("theme-toggle-button");

    themeToggleButton.addEventListener("click", function () {
      document.body.classList.toggle("light_mode");
      if (document.body.classList.contains("light_mode")) {
        micLogo.src = "images/micday/mic-logo.png"; 
      } else {
        micLogo.src = "images/micnight/mic-logo.png"; 
      }
    });
  </script>

  <header class="header">
    <!-- Header Greetings -->
    <h1 class="title">Hello, there</h1>
    <p class="subtitle" id="subtitle-text">Please provide your journey details.</p>
    
    <!-- History Button -->
    <button id="history-button" class="history-btn">History</button>

    <div id="history-popup" class="history-popup">
      <!-- Fixed Header with Title & Close Button -->
      <div class="history-header">
          <span>Booking History</span>
          <span id="close-history" class="close">&times;</span>
      </div>

      <!-- Scrollable Content -->
      <div class="history-content">
          <table id="history-table">
              <thead>
                <tr>
                  <th>Source</th>
                  <th>Destination</th>
                  <th>Tickets</th>
                  <th>Journey Type</th>
                  <th>Phone</th>
                  <th>Cost</th>
                  <th>Payment</th>
                  <th>Booking Time</th>
                  <th>Expiry Time</th>
                  <th>Expiration Status</th>
                  <th>Time Left</th>  <!-- New Column -->
              </tr>
              </thead>
              <tbody></tbody>
          </table>
      </div>
    </div>
  </header>

  <!-- Chat List / Container -->
  <div class="chat-list"></div>

  <!-- Typing Area -->
  <div class="typing-area">
    <form action="#" class="typing-form">
      <div class="input-wrapper">
        <input type="text" placeholder="Enter a prompt here Eg. 'I want to book a ticket'" class="typing-input" required />
        <button id="send-message-button" class="icon material-symbols-rounded">send</button>
      </div>
      <div class="action-buttons">
        <!-- Mic Icon -->
        <span class="material-symbols-rounded mic-icon" id="mic-logo">mic</span>
    
        <!-- Other action buttons -->
        <span id="theme-toggle-button" class="icon material-symbols-rounded">light_mode</span>
        <span id="delete-chat-button" class="icon material-symbols-rounded">delete</span>
      </div>
    </form>
    
    <p class="disclaimer-text">
      This is a Voice Bot that can only be used for booking tickets.
    </p>
  </div>

  <script src="{{ url_for('static', filename='script.js') }}"></script>

</body>
</html>
